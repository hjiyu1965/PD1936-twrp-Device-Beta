# TWRP Device Tree for vivo PD1936 (V1936A)

This device tree is for building TWRP recovery for vivo PD1936 (model V1936A).

## Device Information

- **Manufacturer**: vivo
- **Device**: PD1936
- **Model**: V1936A
- **Platform**: msmnile (Qualcomm Snapdragon 855)
- **Android Version**: 11 (API 30)
- **Kernel**: 4.14.190-perf+
- **Security Patch**: 2021-07-01
- **Build Fingerprint**: vivo/PD1936/PD1936:11/RP1A.200720.012/compiler0714182446:user/release-keys
- **Architecture**: arm64 (with arm32 compatibility)

## Prebuilt Kernel

The kernel has been extracted from the provided recovery image and placed in `prebuilt/kernel`. The DTB is not extracted; you may need to obtain it from the device's boot image or dtbo partition.

## Proprietary Files

Key proprietary files have been extracted from the vendor image and placed in the `proprietary/` directory:

- `bin/install-recovery.sh` - Recovery installation script
- `lib/librecovery_updater_msm.so` - 32-bit recovery updater library
- `lib64/librecovery_updater_msm.so` - 64-bit recovery updater library
- `etc/init/vendor_flash_recovery.rc` - Recovery flash service
- `lib/modules/*.ko` - Kernel modules for audio and other subsystems
- `root/vendor/ueventd.rc` - Device uevent configuration

## Building

1. Set up the TWRP build environment (Android 11).
2. Clone this device tree to `device/vivo/PD1936/`.
3. The necessary proprietary blobs are already included in the tree.
4. Run:
   ```
   . build/envsetup.sh
   lunch twrp_PD1936-eng
   mka recoveryimage
   ```

## Configuration Details

### BoardConfig.mk
- Updated kernel command line with actual values from device
- Partition sizes based on actual recovery and vendor image sizes
- TWRP configuration for msmnile platform
- Added recovery tools and libraries
- Security patch and Android version information

### recovery.fstab
- Based on vendor/etc/fstab.qcom
- Includes all necessary partitions for recovery
- Proper mount points for dynamic partitions (vendor, product, odm)
- Firmware partitions (modem, dsp, bluetooth)

### device.mk
- Proprietary file copying for recovery
- Device-specific properties including build fingerprint
- Recovery-specific properties
- Support for dynamic partitions and A/B updates

## Notes

- Partition sizes in `BoardConfig.mk` are based on actual image sizes. Adjust according to your device's actual partition table if needed.
- The recovery.fstab is derived from the vendor image's fstab.qcom. Verify the block devices match your device.
- For decryption support, additional crypto libraries may be needed.
- Screen resolution and touch configuration may need adjustment based on actual device hardware.
- This device tree provides a complete foundation but may require minor adjustments for full functionality.

## Next Steps

1. Extract DTB from device's boot image or dtbo partition
2. Test build in TWRP environment
3. Adjust screen resolution and touch configuration if needed
4. Add device-specific decryption support if required
5. Test on actual hardware

## Credits

Generated by AI assistant based on analysis of provided recovery.img and vendor.img files.